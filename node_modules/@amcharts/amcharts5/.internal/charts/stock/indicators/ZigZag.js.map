{"version":3,"file":"ZigZag.js","sourceRoot":"","sources":["../../../../../../src/.internal/charts/stock/indicators/ZigZag.ts"],"names":[],"mappings":"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","sourcesContent":["import { Indicator, IIndicatorSettings, IIndicatorPrivate, IIndicatorEvents, IIndicatorEditableSetting } from \"./Indicator\";\r\nimport { LineSeries } from \"../../xy/series/LineSeries\";\r\n\r\n\r\nexport interface IZigZagSettings extends IIndicatorSettings {\r\n\t/**\r\n\t * Percentage of price movement you want to set as your threshold\r\n\t */\r\n\tdeviation?: number;\r\n\r\n\t/**\r\n\t * The minimum number of price bars required where there is no secondary high or low.\r\n\t */\r\n\tdepth?: number;\r\n}\r\n\r\nexport interface IZigZagPrivate extends IIndicatorPrivate {\r\n}\r\n\r\nexport interface IZigZagEvents extends IIndicatorEvents {\r\n}\r\n\r\n/**\r\n * An implementation of a [[StockChart]] indicator.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/stock/indicators/} for more info\r\n */\r\nexport class ZigZag extends Indicator {\r\n\tpublic static className: string = \"ZigZag\";\r\n\tpublic static classNames: Array<string> = Indicator.classNames.concat([ZigZag.className]);\r\n\r\n\tdeclare public _settings: IZigZagSettings;\r\n\tdeclare public _privateSettings: IZigZagPrivate;\r\n\tdeclare public _events: IZigZagEvents;\r\n\r\n\t/**\r\n\t * Indicator series.\r\n\t */\r\n\tdeclare public series: LineSeries;\r\n\r\n\tpublic _editableSettings: IIndicatorEditableSetting[] = [{\r\n\t\tkey: \"deviation\",\r\n\t\tname: this.root.language.translateAny(\"Deviation\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"depth\",\r\n\t\tname: this.root.language.translateAny(\"Depth\"),\r\n\t\ttype: \"number\"\r\n\t}, {\r\n\t\tkey: \"seriesColor\",\r\n\t\tname: this.root.language.translateAny(\"Color\"),\r\n\t\ttype: \"color\"\r\n\t}];\r\n\r\n\tpublic _prepareChildren() {\r\n\r\n\t\tif (this.isDirty(\"deviation\") || this.isDirty(\"depth\")) {\r\n\t\t\tthis._dataDirty = true;\r\n\t\t\tthis.setCustomData(\"deviation\", this.get(\"deviation\"));\r\n\t\t\tthis.setCustomData(\"depth\", this.get(\"depth\"));\r\n\t\t}\r\n\r\n\t\tsuper._prepareChildren();\r\n\t}\r\n\r\n\tprotected _afterNew() {\r\n\t\tsuper._afterNew();\r\n\r\n\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\t\tconst chart = stockSeries.chart;\r\n\r\n\t\tif (chart) {\r\n\t\t\tconst series = chart.series.push(LineSeries.new(this._root, {\r\n\t\t\t\tvalueXField: \"time\",\r\n\t\t\t\tvalueYField: \"zigzag\",\r\n\t\t\t\tgroupDataDisabled: true,\r\n\t\t\t\tcalculateAggregates: true,\r\n\t\t\t\txAxis: stockSeries.get(\"xAxis\"),\r\n\t\t\t\tyAxis: stockSeries.get(\"yAxis\"),\r\n\t\t\t\tthemeTags: [\"indicator\", \"zigzag\"],\r\n\t\t\t\tname: \"ZigZag\"\r\n\t\t\t}))\r\n\t\t\tseries.setPrivate(\"baseValueSeries\", stockSeries);\r\n\t\t\tthis.series = series;\r\n\r\n\t\t\tthis._handleLegend(series);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * @ignore\r\n\t */\r\n\tpublic prepareData() {\r\n\t\tif (this.series) {\r\n\t\t\tconst deviation = this.get(\"deviation\", 5) / 100;\r\n\t\t\tconst stockSeries = this.get(\"stockSeries\");\r\n\t\t\tconst data: Array<any> = [];\r\n\t\t\tif (stockSeries) {\r\n\t\t\t\tconst dataItems = stockSeries.dataItems;\r\n\t\t\t\tif (dataItems.length > 1) {\r\n\t\t\t\t\tlet firstDataItem = dataItems[0];\r\n\r\n\t\t\t\t\tlet goesUp = false;\r\n\t\t\t\t\tlet firstTime = firstDataItem.get(\"valueX\", 0);\r\n\t\t\t\t\tlet firstValue = firstDataItem.get(\"valueY\");\r\n\t\t\t\t\tlet firstHigh = firstDataItem.get(\"highValueY\", firstValue);\r\n\t\t\t\t\tlet firstLow = firstDataItem.get(\"lowValueY\", firstValue);\r\n\r\n\t\t\t\t\tlet zigZagTime: number | undefined;\r\n\t\t\t\t\tlet zigZagValue: number | undefined;\r\n\r\n\t\t\t\t\tlet j = 1;\r\n\t\t\t\t\tfor (let i = 1, len = dataItems.length; i < len; i++) {\r\n\t\t\t\t\t\tlet dataItem = dataItems[i];\r\n\t\t\t\t\t\tlet value = dataItem.get(\"value\", 0);\r\n\t\t\t\t\t\tlet low = dataItem.get(\"lowValueY\", value);\r\n\t\t\t\t\t\tlet high = dataItem.get(\"highValueY\", value);\r\n\t\t\t\t\t\tlet time = dataItem.get(\"valueX\", 0);\r\n\r\n\t\t\t\t\t\tif (low <= Number(firstHigh) * (1 - deviation)) {\r\n\t\t\t\t\t\t\tdata.push({ time: firstTime, zigzag: firstHigh });\r\n\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\tgoesUp = true;\r\n\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (high >= Number(firstLow) * (1 + deviation)) {\r\n\t\t\t\t\t\t\tdata.push({ time: firstTime, zigzag: firstLow });\r\n\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\tgoesUp = false;\r\n\t\t\t\t\t\t\tj = i;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (zigZagValue != null) {\r\n\t\t\t\t\t\tlet depth = this.get(\"depth\", 3);\r\n\t\t\t\t\t\tfor (let i = j - 1, len = dataItems.length; i < len; i++) {\r\n\t\t\t\t\t\t\tlet dataItem = dataItems[i];\r\n\t\t\t\t\t\t\tlet value = dataItem.get(\"value\", 0);\r\n\t\t\t\t\t\t\tlet low = dataItem.get(\"lowValueY\", value);\r\n\t\t\t\t\t\t\tlet high = dataItem.get(\"highValueY\", value);\r\n\t\t\t\t\t\t\tlet time = dataItem.get(\"valueX\", 0);\r\n\r\n\t\t\t\t\t\t\tif (goesUp) {\r\n\t\t\t\t\t\t\t\tif (low <= zigZagValue) {\r\n\t\t\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (high >= zigZagValue * (1 + deviation)) {\r\n\t\t\t\t\t\t\t\t\tlet b = Math.max(0, i - depth);\r\n\t\t\t\t\t\t\t\t\tlet skip = false;\r\n\t\t\t\t\t\t\t\t\tfor (let k = i; k > b; k--) {\r\n\t\t\t\t\t\t\t\t\t\tif (high < dataItems[k].get(\"highValueY\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (!skip) {\r\n\t\t\t\t\t\t\t\t\t\tdata.push({ time: zigZagTime, zigzag: zigZagValue });\r\n\t\t\t\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t\t\tgoesUp = false;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\tif (high >= zigZagValue) {\r\n\t\t\t\t\t\t\t\t\tzigZagValue = high;\r\n\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\telse if (low <= zigZagValue * (1 - deviation)) {\r\n\t\t\t\t\t\t\t\t\tlet b = Math.max(0, i - depth);\r\n\t\t\t\t\t\t\t\t\tlet skip = false;\r\n\t\t\t\t\t\t\t\t\tfor (let k = i; k > b; k--) {\r\n\t\t\t\t\t\t\t\t\t\tif (low > dataItems[k].get(\"lowValueY\")) {\r\n\t\t\t\t\t\t\t\t\t\t\tskip = true;\r\n\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif (!skip) {\r\n\t\t\t\t\t\t\t\t\t\tdata.push({ time: zigZagTime, zigzag: zigZagValue });\r\n\t\t\t\t\t\t\t\t\t\tzigZagValue = low;\r\n\t\t\t\t\t\t\t\t\t\tzigZagTime = time;\r\n\t\t\t\t\t\t\t\t\t\tgoesUp = true;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst lastDataItem = dataItems[dataItems.length - 1];\r\n\t\t\t\t\t\tlet lastTime = lastDataItem.get(\"valueX\", 0);\r\n\t\t\t\t\t\tlet lastValue = lastDataItem.get(\"valueY\");\r\n\t\t\t\t\t\tlet lastHigh = lastDataItem.get(\"highValueY\", lastValue);\r\n\t\t\t\t\t\tlet lastLow = lastDataItem.get(\"lowValueY\", lastValue);\r\n\r\n\t\t\t\t\t\tif (zigZagValue < lastHigh) {\r\n\t\t\t\t\t\t\tdata.push({ time: lastTime, zigzag: lastLow });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tdata.push({ time: lastTime, zigzag: lastHigh });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.series.data.setAll(data);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"]}