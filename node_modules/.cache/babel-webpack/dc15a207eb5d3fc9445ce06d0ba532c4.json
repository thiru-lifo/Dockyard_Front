{"ast":null,"code":"import { environment } from \"src/environments/environment\";\nimport { FormGroupDirective } from \"@angular/forms\";\nimport { MatPaginator } from \"@angular/material/paginator\";\nimport { language } from \"src/environments/language\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/service/api.service\";\nimport * as i2 from \"src/app/service/notification.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"src/app/service/console.service\";\nimport * as i5 from \"@angular/material/form-field\";\nimport * as i6 from \"@angular/material/select\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/core\";\nimport * as i9 from \"@angular/common\";\nimport * as i10 from \"@angular/material/slide-toggle\";\nimport * as i11 from \"@angular/material/checkbox\";\nconst _c0 = [\"closebutton\"];\nconst _c1 = [\"select\"];\n\nfunction ModuleAccessComponent_mat_option_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const process_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", process_r3.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(process_r3.name);\n  }\n}\n\nfunction ModuleAccessComponent_mat_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const role_r4 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", role_r4.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(role_r4.name);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_li_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"mat-checkbox\", 27);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_li_10_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const action_r8 = restoredCtx.$implicit;\n      return action_r8.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_li_10_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r10);\n      const action_r8 = restoredCtx.$implicit;\n      const module_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return ctx_r11.parentCheck(module_r5, action_r8.id, $event);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const action_r8 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", action_r8.id);\n    i0.ɵɵproperty(\"ngModel\", action_r8.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(action_r8.name);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_div_13_li_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"mat-checkbox\", 32);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_li_12_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const action_r16 = restoredCtx.$implicit;\n      return action_r16.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_li_12_Template_mat_checkbox_ngModelChange_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r18);\n      const action_r16 = restoredCtx.$implicit;\n      const module_r5 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return ctx_r19.childCheck(module_r5, module_r5.components, action_r16.id);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const action_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", action_r16.id);\n    i0.ɵɵproperty(\"ngModel\", action_r16.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(action_r16.name);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_div_13_div_15_li_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵelementStart(1, \"mat-checkbox\", 34);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_div_15_li_11_Template_mat_checkbox_ngModelChange_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const action_r23 = restoredCtx.$implicit;\n      return action_r23.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_div_15_li_11_Template_mat_checkbox_ngModelChange_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const action_r23 = restoredCtx.$implicit;\n      const component_r13 = i0.ɵɵnextContext(2).$implicit;\n      const module_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r26 = i0.ɵɵnextContext();\n      return ctx_r26.childCheck2(module_r5, component_r13, component_r13.attributes, action_r23.id, module_r5.components);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const action_r23 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"value\", action_r23.id);\n    i0.ɵɵproperty(\"ngModel\", action_r23.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(action_r23.name);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_div_13_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵelementStart(1, \"div\", 2);\n    i0.ɵɵelementStart(2, \"div\", 3);\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵelementStart(5, \"span\", 30);\n    i0.ɵɵtext(6, \"emergency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 21);\n    i0.ɵɵelementStart(9, \"div\", 22);\n    i0.ɵɵelementStart(10, \"ul\");\n    i0.ɵɵtemplate(11, ModuleAccessComponent_div_26_div_13_div_15_li_11_Template, 3, 3, \"li\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 24);\n    i0.ɵɵelementStart(13, \"mat-slide-toggle\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_div_15_Template_mat_slide_toggle_ngModelChange_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r30);\n      const attribute_r21 = restoredCtx.$implicit;\n      return attribute_r21.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_div_15_Template_mat_slide_toggle_ngModelChange_13_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r30);\n      const attribute_r21 = restoredCtx.$implicit;\n      const component_r13 = i0.ɵɵnextContext().$implicit;\n      const module_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r31 = i0.ɵɵnextContext();\n      return ctx_r31.child2Toggle(module_r5, component_r13, attribute_r21, $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const attribute_r21 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" \", attribute_r21.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", attribute_r21.action);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", attribute_r21.status);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r35 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 28);\n    i0.ɵɵelementStart(1, \"div\", 29);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelementStart(6, \"span\", 30);\n    i0.ɵɵtext(7, \"emergency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 21);\n    i0.ɵɵelementStart(10, \"div\", 22);\n    i0.ɵɵelementStart(11, \"ul\");\n    i0.ɵɵtemplate(12, ModuleAccessComponent_div_26_div_13_li_12_Template, 3, 3, \"li\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 24);\n    i0.ɵɵelementStart(14, \"mat-slide-toggle\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_Template_mat_slide_toggle_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r35);\n      const component_r13 = restoredCtx.$implicit;\n      return component_r13.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_div_13_Template_mat_slide_toggle_ngModelChange_14_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r35);\n      const component_r13 = restoredCtx.$implicit;\n      const module_r5 = i0.ɵɵnextContext().$implicit;\n      const ctx_r36 = i0.ɵɵnextContext();\n      return ctx_r36.childToggle(module_r5, component_r13, $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, ModuleAccessComponent_div_26_div_13_div_15_Template, 14, 3, \"div\", 31);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const component_r13 = ctx.$implicit;\n    i0.ɵɵadvance(8);\n    i0.ɵɵtextInterpolate1(\" \", component_r13.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", component_r13.action);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", component_r13.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", component_r13.attributes);\n  }\n}\n\nfunction ModuleAccessComponent_div_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵelementStart(1, \"div\", 19);\n    i0.ɵɵelementStart(2, \"div\", 2);\n    i0.ɵɵelementStart(3, \"div\", 3);\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 21);\n    i0.ɵɵelementStart(8, \"div\", 22);\n    i0.ɵɵelementStart(9, \"ul\");\n    i0.ɵɵtemplate(10, ModuleAccessComponent_div_26_li_10_Template, 3, 3, \"li\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 24);\n    i0.ɵɵelementStart(12, \"mat-slide-toggle\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_div_26_Template_mat_slide_toggle_ngModelChange_12_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const module_r5 = restoredCtx.$implicit;\n      return module_r5.status = $event;\n    })(\"ngModelChange\", function ModuleAccessComponent_div_26_Template_mat_slide_toggle_ngModelChange_12_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r39);\n      const module_r5 = restoredCtx.$implicit;\n      const ctx_r40 = i0.ɵɵnextContext();\n      return ctx_r40.parentToggle(module_r5, $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, ModuleAccessComponent_div_26_div_13_Template, 16, 4, \"div\", 26);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const module_r5 = ctx.$implicit;\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(module_r5.name);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngForOf\", module_r5.action);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", module_r5.status);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", module_r5.components);\n  }\n}\n\nexport let ModuleAccessComponent = /*#__PURE__*/(() => {\n  class ModuleAccessComponent {\n    constructor(api, notification, dialog, logger) {\n      this.api = api;\n      this.notification = notification;\n      this.dialog = dialog;\n      this.logger = logger;\n      this.processes = [];\n      this.roles = [];\n      this.allSelected = false;\n      this.modules = [];\n      this.permission_id = '';\n      this.displayedColumns = [\"module\", \"module_components\", \"module_components_attribute\", \"action\", \"status\", \"edit\", \"delete\"];\n    }\n\n    ngOnInit() {\n      this.getProcess(); //this.performJquery();\n    }\n\n    processChange(process_id) {\n      if (process_id) this.getUserRole(process_id);\n      this.logger.info('processChange');\n      if (!process_id) this.modules = [];else if (!this.user_role) this.getModuleAccess(process_id);else {\n        this.getRoleAccess();\n      }\n      if (this.user_role) this.getRoleAccess();\n    }\n\n    roleChange(role_id) {\n      this.logger.info(role_id);\n\n      if (!this.process) {\n        this.notification.displayMessage(language[environment.DEFAULT_LANG].processFirst);\n        this.user_role = '';\n      } else {\n        if (role_id) this.getRoleAccess();else {\n          this.getModuleAccess(this.process);\n        }\n      }\n    }\n\n    getModuleAccess(process_id) {\n      this.api.getAPI(environment.API_URL + \"access/allmodules?process_id=\" + process_id).subscribe(res => {\n        this.modules = this.formatStatus(res.data);\n        this.logger.log('moduleAccess', res.data);\n      });\n    }\n\n    getRoleAccess() {\n      if (this.process && this.user_role) {\n        this.api.getAPI(environment.API_URL + \"access/permissions?process_id=\" + this.process + '&user_role_id=' + this.user_role).subscribe(res => {\n          if (res.data.length > 0) {\n            let permissions = JSON.parse(res.data[0].permissions);\n            this.permission_id = res.data[0].id;\n\n            if (permissions.length > 0) {\n              this.updatePermissions(permissions); //this.modules=permissions;\n            } else {\n              this.permission_id = '';\n              this.getModuleAccess(this.process);\n            }\n          } else {\n            this.permission_id = '';\n            this.getModuleAccess(this.process);\n          }\n        });\n      }\n    }\n\n    updatePermissions(permissions) {\n      if (this.modules) {\n        this.modules.filter(function (module) {\n          /* Module Status */\n          let moduleStatus = permissions.filter(function (p_module) {\n            if (p_module.id == module.id) {\n              module.status = p_module.status;\n              return p_module.status;\n            }\n          });\n          /* Component Status */\n\n          module.components.filter(function (component) {\n            let componentStatus = permissions.filter(function (p_module) {\n              if (p_module.id == module.id) {\n                p_module.components.filter(function (p_component) {\n                  if (p_component.id == component.id) {\n                    component.status = p_component.status;\n                    return p_component.status;\n                  }\n                });\n              }\n            });\n            /* Attribute Status */\n\n            component.attributes.filter(function (attribute) {\n              let attributeStatus = permissions.filter(function (p_module) {\n                if (p_module.id == module.id) {\n                  p_module.components.filter(function (p_component) {\n                    if (p_component.id == component.id) {\n                      p_component.attributes.filter(function (p_attribute) {\n                        if (p_attribute.id == attribute.id) {\n                          attribute.status = p_attribute.status;\n                          return p_attribute.status;\n                        }\n                      });\n                    }\n                  });\n                }\n              });\n            });\n          });\n          /* Module Action status */\n\n          module.action.filter(function (module_action) {\n            let moduleActionStatus = permissions.filter(function (p_module) {\n              if (p_module.id == module.id) {\n                p_module.action.filter(function (p_module_action) {\n                  if (p_module_action.id == module_action.id) {\n                    module_action.status = p_module_action.status;\n                    return p_module_action.status;\n                  }\n                });\n              }\n            }); //console.log('moduleActionStatus',moduleActionStatus);\n            // module_action.status=moduleActionStatus.length==0?false:moduleActionStatus;\n          });\n          /* Component Action Status */\n\n          module.components.filter(function (component) {\n            let componentActionStatus = permissions.filter(function (p_module) {\n              if (p_module.id == module.id) {\n                p_module.components.filter(function (p_component) {\n                  if (p_component.id == component.id) {\n                    component.action.filter(function (component_action) {\n                      p_component.action.filter(function (pcomponent_action) {\n                        if (component_action.id == pcomponent_action.id) {\n                          component_action.status = pcomponent_action.status;\n                          return pcomponent_action.status;\n                        }\n                      });\n                    });\n                  }\n                });\n              }\n            }); // Attribute Action Status\n\n            component.attributes.filter(function (attribute) {\n              let componentActionStatus = permissions.filter(function (p_module) {\n                if (p_module.id == module.id) {\n                  p_module.components.filter(function (p_component) {\n                    if (p_component.id == component.id) {\n                      attribute.action.filter(function (attribute_action) {\n                        p_component.attributes.filter(function (pcomponent_attribute) {\n                          pcomponent_attribute.action.filter(function (pcomponent_attribute_action) {\n                            if (attribute_action.id == pcomponent_attribute_action.id) {\n                              attribute_action.status = pcomponent_attribute_action.status;\n                              return pcomponent_attribute_action.status;\n                            }\n                          });\n                        });\n                      });\n                    }\n                  });\n                }\n              });\n            });\n          }); //module.status=moduleStatus.length==0?false:moduleStatus;\n        });\n      }\n    }\n\n    savePermission() {\n      if (!this.process) this.notification.displayMessage(language[environment.DEFAULT_LANG].process);else if (!this.user_role) this.notification.displayMessage(language[environment.DEFAULT_LANG].userRole);else {\n        this.logger.log('this.modules', this.modules);\n        this.api.postAPI(environment.API_URL + \"access/permissions/details\", {\n          id: this.permission_id,\n          user_role: this.user_role,\n          process: this.process,\n          permissions: JSON.stringify(this.modules)\n        }).subscribe(res => {\n          if (res.status == 'success') {\n            this.permission_id = res.data.id;\n          }\n\n          this.notification.success(res.message);\n        });\n      }\n    }\n\n    formatStatus(modules) {\n      if (modules.length > 0) {\n        modules.filter(function (module) {\n          module.status = false;\n          module.components.filter(function (component) {\n            component.status = false;\n            component.attributes.filter(function (attribute) {\n              attribute.status = false;\n              attribute.action.filter(function (action) {\n                action.status = false;\n              });\n            });\n            component.action.filter(function (action) {\n              action.status = false;\n            });\n          });\n          module.action.filter(function (action) {\n            action.status = false;\n          });\n        });\n      }\n\n      return modules;\n    }\n\n    getProcess() {\n      this.api.getAPI(environment.API_URL + \"access/process\").subscribe(res => {\n        this.processes = res.data;\n      });\n    }\n\n    getUserRole(process_id = '') {\n      let searchString = '?status=1';\n      searchString += process_id ? '&process_id=' + process_id : '';\n      this.api.getAPI(environment.API_URL + \"access/access_user_roles\" + searchString).subscribe(res => {\n        this.roles = res.data;\n      });\n    }\n\n    parentCheck(modules, action_id, status) {\n      for (let i = 0; i < modules.components.length; i++) {\n        let componentActions = modules.components[i].action;\n\n        for (let j = 0; j < componentActions.length; j++) {\n          if (componentActions[j].id == action_id) componentActions[j].status = status;\n          let attributes = modules.components[i].attributes;\n\n          for (let k = 0; k < attributes.length; k++) {\n            for (let l = 0; l < attributes[k].action.length; l++) {\n              if (attributes[k].action[j].id == action_id) attributes[k].action[j].status = status;\n            }\n          }\n        }\n      }\n    }\n\n    childCheck(modules, components, action_id) {\n      let selectedComponents = components.filter(function (component) {\n        let selectedActions = component.action.filter(function (action) {\n          if (action.id == action_id && action.status) {\n            return action.status;\n          }\n        });\n        return selectedActions.length > 0;\n      });\n      modules.action.filter(function (action) {\n        if (action.id == action_id) action.status = selectedComponents.length > 0 ? true : false;\n      });\n    }\n\n    childCheck2(modules, components, attributes, action_id, all_componets) {\n      let selectedAttributes = attributes.filter(function (attribute) {\n        let selectedActions = attribute.action.filter(function (action) {\n          if (action.id == action_id && action.status) {\n            return action.status;\n          }\n        });\n        return selectedActions.length > 0;\n      });\n      let selectedComponents = all_componets.filter(function (component) {\n        let selectedActions = component.action.filter(function (action) {\n          if (action.id == action_id && action.status) {\n            return action.status;\n          }\n        });\n        return selectedActions.length > 0;\n      });\n      modules.action.filter(function (action) {\n        if (action.id == action_id) action.status = selectedAttributes.length > 0 ? true : selectedComponents.length > 0 ? true : false;\n      });\n      components.action.filter(function (action) {\n        if (action.id == action_id) action.status = selectedAttributes.length > 0 ? true : false;\n      });\n    }\n\n    parentToggle(modules, status) {\n      for (let i = 0; i < modules.components.length; i++) {\n        let component = modules.components[i];\n        component.status = status;\n        let attributes = component.attributes;\n\n        for (let j = 0; j < attributes.length; j++) {\n          attributes[j].status = status;\n        }\n      }\n    }\n\n    childToggle(modules, component, status) {\n      component.status = status;\n      let selectedComponents = modules.components.filter(function (component) {\n        return component.status == true;\n      });\n      /*(component.attributes).filter(function(attribute){\n        attribute.status=status;\n      })*/\n\n      modules.status = selectedComponents.length > 0 ? true : false;\n    }\n\n    child2Toggle(modules, component, attribute, status) {\n      attribute.status = status;\n      let selectedAttributes = component.attributes.filter(function (attribute) {\n        return attribute.status == true;\n      });\n      let selectedComponents = modules.components.filter(function (component) {\n        return component.status == true;\n      });\n      component.status = selectedAttributes.length > 0 ? true : false;\n      modules.status = selectedAttributes.length > 0 ? true : selectedComponents.length > 0 ? true : false;\n    }\n\n  }\n\n  ModuleAccessComponent.ɵfac = function ModuleAccessComponent_Factory(t) {\n    return new (t || ModuleAccessComponent)(i0.ɵɵdirectiveInject(i1.ApiService), i0.ɵɵdirectiveInject(i2.NotificationService), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.ConsoleService));\n  };\n\n  ModuleAccessComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ModuleAccessComponent,\n    selectors: [[\"app-module-access\"]],\n    viewQuery: function ModuleAccessComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(FormGroupDirective, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.closebutton = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.select = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.pagination = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formGroupDirective = _t.first);\n      }\n    },\n    decls: 27,\n    vars: 5,\n    consts: [[1, \"body-card\"], [1, \"container-fluid\"], [1, \"row\"], [1, \"col-md-4\"], [1, \"heading1\"], [1, \"col-md-8\"], [1, \"form-style-md\", \"form-row\", \"d-flex\", \"justify-content-end\", \"button-title\"], [1, \"col-md-3\"], [1, \"matt-group\"], [\"appearance\", \"fill\"], [\"value\", \"default\", \"placeholder\", \"Select Unit\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"default\", \"placeholder\", \"Select role\", 3, \"ngModel\", \"ngModelChange\"], [1, \"\"], [\"href\", \"javascript:void(0);\", 1, \"btn\", \"btn-primary\", \"btn-md\", 3, \"click\"], [1, \"roles-cover\", \"mb-3\"], [\"class\", \"roles-row\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [1, \"roles-row\"], [1, \"roles-heading\"], [1, \"roles-title\"], [1, \"col-md-6\"], [1, \"roles-check\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-md-2\", \"text-right\"], [3, \"ngModel\", \"ngModelChange\"], [\"class\", \"roles-body\", 4, \"ngFor\", \"ngForOf\"], [1, \"example-margin\", \"module-permission\", 3, \"ngModel\", \"value\", \"ngModelChange\"], [1, \"roles-body\"], [1, \"roles-category\", \"subcatg1\"], [1, \"material-icons\", 2, \"font-size\", \"11px\"], [\"class\", \"roles-category subcatg2\", 4, \"ngFor\", \"ngForOf\"], [1, \"example-margin\", \"component-permission\", 3, \"value\", \"ngModel\", \"ngModelChange\"], [1, \"roles-category\", \"subcatg2\"], [1, \"example-margin\", \"attribute-permission\", 3, \"value\", \"ngModel\", \"ngModelChange\"]],\n    template: function ModuleAccessComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"section\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"h2\", 4);\n        i0.ɵɵtext(5, \"Access Privileges\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵelementStart(7, \"div\", 6);\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵelementStart(10, \"mat-form-field\", 9);\n        i0.ɵɵelementStart(11, \"mat-select\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.process = $event;\n        })(\"ngModelChange\", function ModuleAccessComponent_Template_mat_select_ngModelChange_11_listener($event) {\n          return ctx.processChange($event);\n        });\n        i0.ɵɵelementStart(12, \"mat-option\");\n        i0.ɵɵtext(13, \"None\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(14, ModuleAccessComponent_mat_option_14_Template, 2, 2, \"mat-option\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 7);\n        i0.ɵɵelementStart(16, \"div\", 8);\n        i0.ɵɵelementStart(17, \"mat-form-field\", 9);\n        i0.ɵɵelementStart(18, \"mat-select\", 12);\n        i0.ɵɵlistener(\"ngModelChange\", function ModuleAccessComponent_Template_mat_select_ngModelChange_18_listener($event) {\n          return ctx.user_role = $event;\n        })(\"ngModelChange\", function ModuleAccessComponent_Template_mat_select_ngModelChange_18_listener($event) {\n          return ctx.roleChange($event);\n        });\n        i0.ɵɵelementStart(19, \"mat-option\");\n        i0.ɵɵtext(20, \"None\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(21, ModuleAccessComponent_mat_option_21_Template, 2, 2, \"mat-option\", 11);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 13);\n        i0.ɵɵelementStart(23, \"a\", 14);\n        i0.ɵɵlistener(\"click\", function ModuleAccessComponent_Template_a_click_23_listener() {\n          return ctx.savePermission();\n        });\n        i0.ɵɵtext(24, \"Save\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 15);\n        i0.ɵɵtemplate(26, ModuleAccessComponent_div_26_Template, 14, 4, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.process);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.processes);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngModel\", ctx.user_role);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.roles);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.modules);\n      }\n    },\n    directives: [i5.MatFormField, i6.MatSelect, i7.NgControlStatus, i7.NgModel, i8.MatOption, i9.NgForOf, i10.MatSlideToggle, i11.MatCheckbox],\n    styles: [\".heading1[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:10px 0 0}.roles-check[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.roles-check[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;display:inline-block;font-size:13px;margin-left:15px;font-weight:400}.roles-check[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin:0!important;color:#555}.roles-cover[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:4px}.roles-cover[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .roles-cover[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-bottom:0}.roles-heading[_ngcontent-%COMP%]{background:#f5f5f5;padding:10px;font-weight:600}.roles-heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0b014a}.roles-body[_ngcontent-%COMP%]{background:#fff;padding:0}.roles-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;font-weight:500}.roles-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   .iconify[_ngcontent-%COMP%]{color:#0b014a;font-size:12px}.roles-cover[_ngcontent-%COMP%]   .roles-category[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:10px}.roles-cover[_ngcontent-%COMP%]   .subcatg1[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]{padding-left:10px}.roles-cover[_ngcontent-%COMP%]   .subcatg2[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]{padding-left:26px}.roles-cover[_ngcontent-%COMP%]   .subcatg3[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]{padding-left:36px}.roles-category.subcatg1[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]{margin-top:10px!important}.roles-category.subcatg1[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.roles-heading[_ngcontent-%COMP%]   .roles-title[_ngcontent-%COMP%]{margin-top:5px}\"]\n  });\n  return ModuleAccessComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}