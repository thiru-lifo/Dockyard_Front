{"ast":null,"code":"import { __extends, __read, __spreadArray } from \"tslib\";\nimport * as $type from \"./Type\";\nimport * as $array from \"./Array\";\nimport * as $object from \"./Object\";\nimport { Disposer, DisposerClass } from \"./Disposer\";\n/**\r\n * ============================================================================\r\n * DOM FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Execute a function when DOM is ready.\r\n *\r\n * @since 5.0.2\r\n * @param  f  Callback\r\n */\n\nexport function ready(f) {\n  if (document.readyState !== \"loading\") {\n    f();\n  } else {\n    var listener_1 = function () {\n      if (document.readyState !== \"loading\") {\n        document.removeEventListener(\"readystatechange\", listener_1);\n        f();\n      }\n    };\n\n    document.addEventListener(\"readystatechange\", listener_1);\n  }\n}\n/**\r\n * Removes a DOM element.\r\n * @param  el  Target element\r\n */\n\nexport function removeElement(el) {\n  if (el.parentNode) {\n    el.parentNode.removeChild(el);\n  }\n}\n/**\r\n * Function that adds a disposable event listener directly to a DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param dom       A DOM element to add event to\r\n * @param type      Event type\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\n\nexport function addEventListener(dom, type, listener, options) {\n  //@todo proper type check for options: EventListenerOptions | boolean (TS for some reason gives error on passive parameter)\n  //console.log(type, dom);\n  dom.addEventListener(type, listener, options || false);\n  return new Disposer(function () {\n    dom.removeEventListener(type, listener, options || false);\n  });\n}\n/**\r\n * Function that adds an event listener which is triggered when the browser's zoom changes.\r\n *\r\n * @param listener  Event listener\r\n * @returns Disposable event\r\n */\n\nexport function onZoom(listener) {\n  // TODO use matchMedia instead ?\n  return addEventListener(window, \"resize\", function (_ev) {\n    listener();\n  });\n}\n/**\r\n * @ignore\r\n */\n\nexport function supports(cap) {\n  switch (cap) {\n    case \"touchevents\":\n      //return \"ontouchstart\" in document.documentElement;\n      return window.hasOwnProperty(\"TouchEvent\");\n\n    case \"pointerevents\":\n      return window.hasOwnProperty(\"PointerEvent\");\n\n    case \"mouseevents\":\n      return window.hasOwnProperty(\"MouseEvent\");\n\n    case \"wheelevents\":\n      return window.hasOwnProperty(\"WheelEvent\");\n\n    case \"keyboardevents\":\n      return window.hasOwnProperty(\"KeyboardEvent\");\n  }\n\n  return false;\n}\n/**\r\n * @ignore\r\n */\n\nexport function getPointerId(event) {\n  var id = event.pointerId || 0; //console.log(event);\n\n  return id;\n}\n/**\r\n * Removes focus from any element by shifting focus to body.\r\n *\r\n * @ignore\r\n */\n\nexport function blur() {\n  if (document.activeElement && document.activeElement != document.body) {\n    if (document.activeElement.blur) {\n      document.activeElement.blur();\n    } else {\n      var input = document.createElement(\"button\");\n      input.style.position = \"fixed\";\n      input.style.top = \"0px\";\n      input.style.left = \"-10000px\";\n      document.body.appendChild(input);\n      input.focus();\n      input.blur();\n      document.body.removeChild(input);\n    }\n  }\n}\n/**\r\n * Focuses element.\r\n *\r\n * @ignore\r\n */\n\nexport function focus(el) {\n  if (el) {\n    el.focus();\n  }\n}\n/**\r\n * @ignore\r\n */\n\nexport function getRendererEvent(key) {\n  if (supports(\"pointerevents\")) {\n    return key;\n  } else if (supports(\"touchevents\")) {\n    switch (key) {\n      case \"pointerover\":\n        return \"touchstart\";\n\n      case \"pointerout\":\n        return \"touchend\";\n\n      case \"pointerdown\":\n        return \"touchstart\";\n\n      case \"pointermove\":\n        return \"touchmove\";\n\n      case \"pointerup\":\n        return \"touchend\";\n\n      case \"click\":\n        return \"click\";\n\n      case \"dblclick\":\n        return \"dblclick\";\n    }\n  } else if (supports(\"mouseevents\")) {\n    switch (key) {\n      case \"pointerover\":\n        return \"mouseover\";\n\n      case \"pointerout\":\n        return \"mouseout\";\n\n      case \"pointerdown\":\n        return \"mousedown\";\n\n      case \"pointermove\":\n        return \"mousemove\";\n\n      case \"pointerup\":\n        return \"mouseup\";\n\n      case \"click\":\n        return \"click\";\n\n      case \"dblclick\":\n        return \"dblclick\";\n    }\n  }\n\n  return key;\n}\n/**\r\n * Determines if pointer event originated from a touch pointer or mouse.\r\n *\r\n * @param ev  Original event\r\n * @return Touch pointer?\r\n */\n\nexport function isTouchEvent(ev) {\n  if (typeof Touch !== \"undefined\" && ev instanceof Touch) {\n    return true;\n  } else if (typeof PointerEvent !== \"undefined\" && ev instanceof PointerEvent && ev.pointerType != null) {\n    switch (ev.pointerType) {\n      case \"touch\":\n      case \"pen\":\n      case 2:\n        return true;\n\n      case \"mouse\":\n      case 4:\n        return false;\n\n      default:\n        return !(ev instanceof MouseEvent);\n    }\n  } else if (ev.type != null) {\n    if (ev.type.match(/^mouse/)) {\n      return false;\n    }\n  }\n\n  return true;\n}\n/**\r\n * Sets style property on DOM element.\r\n *\r\n * @ignore Exclude from docs\r\n */\n\nexport function setStyle(dom, property, value) {\n  dom.style[property] = value;\n}\nexport function getStyle(dom, property) {\n  return dom.style[property];\n}\n/**\r\n * Checks of element `a` contains element `b`.\r\n *\r\n * @param a  Aleged ascendant\r\n * @param b  Aleged descendant\r\n * @return Contains?\r\n */\n\nexport function contains(a, b) {\n  var cursor = b;\n\n  while (true) {\n    if (a === cursor) {\n      return true;\n    } else if (cursor.parentNode === null) {\n      // TODO better ShadowRoot detection\n      if (cursor.host == null) {\n        return false;\n      } else {\n        cursor = cursor.host;\n      }\n    } else {\n      cursor = cursor.parentNode;\n    }\n  }\n}\n/**\r\n * Returns `true` if pointer event originated on an element within Root.\r\n *\r\n * @since 5.2.8\r\n * @param  event   Event\r\n * @param  target  Target element\r\n */\n\nexport function isLocalEvent(event, target) {\n  return event.target && contains(target.root.dom, event.target);\n}\n/**\r\n * Disables or enables interactivity of a DOM element.\r\n *\r\n * @param  target       Target element\r\n * @param  interactive  Interactive?\r\n */\n\nexport function setInteractive(target, interactive) {\n  if (interactive) {\n    target.style.pointerEvents = \"auto\";\n  } else {\n    target.style.pointerEvents = \"none\";\n  }\n}\n/**\r\n * Returns the shadow root of the element or null\r\n *\r\n * @param a  Node\r\n * @return Root\r\n */\n\nexport function getShadowRoot(a) {\n  var cursor = a;\n\n  while (true) {\n    if (cursor.parentNode === null) {\n      // TODO better ShadowRoot detection\n      if (cursor.host != null) {\n        return cursor;\n      } else {\n        return null;\n      }\n    } else {\n      cursor = cursor.parentNode;\n    }\n  }\n}\n/**\r\n * [rootStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n */\n\nvar rootStylesheet;\n/**\r\n * @ignore Exclude from docs\r\n */\n\nfunction createStylesheet(element, text, nonce) {\n  if (nonce === void 0) {\n    nonce = \"\";\n  } // TODO use createElementNS ?\n\n\n  var e = document.createElement(\"style\");\n  e.type = \"text/css\";\n\n  if (nonce != \"\") {\n    e.setAttribute(\"nonce\", nonce);\n  }\n\n  e.textContent = text;\n\n  if (element === null) {\n    document.head.appendChild(e);\n  } else {\n    element.appendChild(e);\n  }\n\n  return e;\n}\n/**\r\n * [getStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @return [description]\r\n */\n\n\nfunction getStylesheet(element, nonce) {\n  if (nonce === void 0) {\n    nonce = \"\";\n  }\n\n  if (element === null) {\n    if (rootStylesheet == null) {\n      // TODO use createElementNS ?\n      var e = document.createElement(\"style\");\n      e.type = \"text/css\";\n\n      if (nonce != \"\") {\n        e.setAttribute(\"nonce\", nonce);\n      }\n\n      document.head.appendChild(e);\n      rootStylesheet = e.sheet;\n    }\n\n    return rootStylesheet;\n  } else {\n    // TODO use createElementNS ?\n    var e = document.createElement(\"style\");\n    e.type = \"text/css\";\n\n    if (nonce != \"\") {\n      e.setAttribute(\"nonce\", nonce);\n    }\n\n    element.appendChild(e);\n    return e.sheet;\n  }\n}\n/**\r\n * [makeStylesheet description]\r\n *\r\n * @ignore Exclude from docs\r\n * @todo Description\r\n * @param selector  [description]\r\n * @return [description]\r\n */\n\n\nfunction appendStylesheet(root, selector) {\n  var index = root.cssRules.length;\n  root.insertRule(selector + \"{}\", index);\n  return root.cssRules[index];\n}\n/**\r\n * Defines a class for a CSS rule.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\n\n\nvar StyleRule =\n/** @class */\nfunction (_super) {\n  __extends(StyleRule, _super);\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param selector  CSS selector\r\n   * @param styles    An object of style attribute - value pairs\r\n   */\n\n\n  function StyleRule(element, selector, styles, nonce) {\n    if (nonce === void 0) {\n      nonce = \"\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    Object.defineProperty(_this, \"_root\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * CSS rule.\r\n     */\n\n    Object.defineProperty(_this, \"_rule\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    _this._root = getStylesheet(element, nonce);\n\n    try {\n      _this._rule = appendStylesheet(_this._root, selector);\n      $object.each(styles, function (key, value) {\n        _this.setStyle(key, value);\n      });\n    } catch (err) {\n      // Create an empty rule on failed selectors\n      _this._rule = new CSSStyleRule();\n    }\n\n    return _this;\n  }\n\n  Object.defineProperty(StyleRule.prototype, \"selector\", {\n    /**\r\n     * @return CSS selector\r\n     */\n    get: function () {\n      return this._rule.selectorText;\n    },\n\n    /**\r\n     * A CSS selector text.\r\n     *\r\n     * E.g.: `.myClass p`\r\n     *\r\n     * @param selector  CSS selector\r\n     */\n    set: function (selector) {\n      this._rule.selectorText = selector;\n    },\n    enumerable: false,\n    configurable: true\n  }); // TODO test this\n\n  Object.defineProperty(StyleRule.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      // TODO a bit hacky\n      var index = $array.indexOf(this._root.cssRules, this._rule);\n\n      if (index === -1) {\n        throw new Error(\"Could not dispose StyleRule\");\n      } else {\n        // TODO if it's empty remove it from the DOM ?\n        this._root.deleteRule(index);\n      }\n    }\n  });\n  /**\r\n   * Sets the same style properties with browser-specific prefixes.\r\n   *\r\n   * @param name   Attribute name\r\n   * @param value  Attribute value\r\n   */\n\n  Object.defineProperty(StyleRule.prototype, \"_setVendorPrefixName\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (name, value) {\n      var style = this._rule.style;\n      style.setProperty(\"-webkit-\" + name, value, \"\");\n      style.setProperty(\"-moz-\" + name, value, \"\");\n      style.setProperty(\"-ms-\" + name, value, \"\");\n      style.setProperty(\"-o-\" + name, value, \"\");\n      style.setProperty(name, value, \"\");\n    }\n  });\n  /**\r\n   * Sets a value for specific style attribute.\r\n   *\r\n   * @param name   Attribute\r\n   * @param value  Value\r\n   */\n\n  Object.defineProperty(StyleRule.prototype, \"setStyle\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (name, value) {\n      if (name === \"transition\") {\n        this._setVendorPrefixName(name, value);\n      } else {\n        this._rule.style.setProperty(name, value, \"\");\n      }\n    }\n  });\n  return StyleRule;\n}(DisposerClass);\n\nexport { StyleRule };\n/**\r\n * Defines a class for an entire CSS style sheet.\r\n *\r\n * Can be used to dynamically add CSS to the document.\r\n */\n\nvar StyleSheet =\n/** @class */\nfunction (_super) {\n  __extends(StyleSheet, _super);\n  /**\r\n   * Constructor.\r\n   *\r\n   * @param text  CSS stylesheet\r\n   */\n\n\n  function StyleSheet(element, text, nonce) {\n    if (nonce === void 0) {\n      nonce = \"\";\n    }\n\n    var _this = _super.call(this) || this;\n\n    Object.defineProperty(_this, \"_element\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    _this._element = createStylesheet(element, text, nonce);\n    return _this;\n  }\n\n  Object.defineProperty(StyleSheet.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this._element.parentNode) {\n        this._element.parentNode.removeChild(this._element);\n      }\n    }\n  });\n  return StyleSheet;\n}(DisposerClass);\n\nexport { StyleSheet };\n/**\r\n * Adds a class name to an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\n\nexport function addClass(element, className) {\n  if (!element) {\n    return;\n  }\n\n  if (element.classList) {\n    var classes = className.split(\" \");\n    $array.each(classes, function (name) {\n      element.classList.add(name);\n    });\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \") + \" \" + className);\n    } else {\n      element.setAttribute(\"class\", className);\n    }\n  }\n}\n/**\r\n * Removes a class name from an HTML or SVG element.\r\n *\r\n * @ignore Exclude from docs\r\n * @param element    Element\r\n * @param className  Class name to add\r\n */\n\nexport function removeClass(element, className) {\n  if (!element) {\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(className);\n  } else {\n    var currentClassName = element.getAttribute(\"class\");\n\n    if (currentClassName) {\n      element.setAttribute(\"class\", currentClassName.split(\" \").filter(function (item) {\n        return item !== className;\n      }).join(\" \"));\n    }\n  }\n} // /**\n//  * Applies a set of styles to an element. Stores the original styles so they\n//  * can be restored later.\n//  *\n//  * @ignore\n//  * @param io      Element\n//   */\n// export function prepElementForDrag(dom: HTMLElement): void {\n// \t// @todo: save current values\n// \t// Define possible props\n// \tlet props = [\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\n// \t];\n// \tfor (let i = 0; i < props.length; i++) {\n// \t\tif (props[i] in dom.style) {\n// \t\t\tsetStyle(dom, props[i], \"none\");\n// \t\t}\n// \t}\n// \t// Remove iOS-specific selection;\n// \tsetStyle(dom, \"tapHighlightColor\", \"rgba(0, 0, 0, 0)\");\n// }\n// /**\n//  * Restores replaced styles\n//  *\n//  * @ignore\n//  * @param  io  Element\n//  */\n// export function unprepElementForDrag(dom: HTMLElement): void {\n// \t// Define possible props\n// \tlet props = [\n// \t\t\"touchAction\", \"webkitTouchAction\", \"MozTouchAction\", \"MSTouchAction\", \"msTouchAction\", \"oTouchAction\",\n// \t\t\"userSelect\", \"webkitUserSelect\", \"MozUserSelect\", \"MSUserSelect\", \"msUserSelect\", \"oUserSelect\",\n// \t\t\"touchSelect\", \"webkitTouchSelect\", \"MozTouchSelect\", \"MSTouchSelect\", \"msTouchSelect\", \"oTouchSelect\",\n// \t\t\"touchCallout\", \"webkitTouchCallout\", \"MozTouchCallout\", \"MSTouchCallout\", \"msTouchCallout\", \"oTouchCallout\",\n// \t\t\"contentZooming\", \"webkitContentZooming\", \"MozContentZooming\", \"MSContentZooming\", \"msContentZooming\", \"oContentZooming\",\n// \t\t\"userDrag\", \"webkitUserDrag\", \"MozUserDrag\", \"MSUserDrag\", \"msUserDrag\", \"oUserDrag\"\n// \t];\n// \tfor (let i = 0; i < props.length; i++) {\n// \t\tif (props[i] in dom.style) {\n// \t\t\tsetStyle(dom, props[i], \"\");\n// \t\t}\n// \t}\n// \t// Remove iOS-specific selection;\n// \tsetStyle(dom, \"tapHighlightColor\", \"\");\n// }\n\nexport function iOS() {\n  return /apple/i.test(navigator.vendor) && \"ontouchend\" in document;\n}\nexport function getSafeResolution() {\n  return iOS() ? 1 : undefined;\n}\nexport function relativeToValue(percent, full) {\n  if ($type.isNumber(percent)) {\n    return percent;\n  } else if (percent != null && $type.isNumber(percent.value) && $type.isNumber(full)) {\n    return full * percent.value;\n  } else {\n    return 0;\n  }\n}\n/**\r\n * Returns number of decimals\r\n *\r\n * @ignore Exclude from docs\r\n * @param number  Input number\r\n * @return Number of decimals\r\n */\n\nexport function decimalPlaces(number) {\n  var match = ('' + number).match(/(?:\\.(\\d+))?(?:[eE]([+-]?\\d+))?$/);\n\n  if (!match) {\n    return 0;\n  }\n\n  return Math.max(0, (match[1] ? match[1].length : 0) - (match[2] ? +match[2] : 0));\n}\n/**\r\n * ============================================================================\r\n * STRING FORMATTING FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Pads a string with additional characters to certain length.\r\n *\r\n * @param value  A numeric value\r\n * @param len    Result string length in characters\r\n * @param char   A character to use for padding\r\n * @return Padded value as string\r\n */\n\nexport function padString(value, len, char) {\n  if (len === void 0) {\n    len = 0;\n  }\n\n  if (char === void 0) {\n    char = \"0\";\n  }\n\n  if (typeof value !== \"string\") {\n    value = value.toString();\n  }\n\n  return len > value.length ? Array(len - value.length + 1).join(char) + value : value;\n}\nexport function trimLeft(text) {\n  return text.replace(/^[\\s]*/, \"\");\n}\nexport function trimRight(text) {\n  return text.replace(/[\\s]*$/, \"\");\n}\nexport function trim(text) {\n  return trimLeft(trimRight(text));\n}\n/**\r\n * Tries to determine format type.\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format string\r\n * @return Format type (\"string\" | \"number\" | \"date\" | \"duration\")\r\n */\n\nexport function getFormat(format) {\n  // Undefined?\n  if (typeof format === \"undefined\") {\n    return \"string\";\n  } // Cleanup and lowercase format\n\n\n  format = format.toLowerCase().replace(/^\\[[^\\]]*\\]/, \"\"); // Remove style tags\n\n  format = format.replace(/\\[[^\\]]+\\]/, \"\"); // Trim\n\n  format = format.trim(); // Check for any explicit format hints (i.e. /Date)\n\n  var hints = format.match(/\\/(date|number|duration)$/);\n\n  if (hints) {\n    return hints[1];\n  } // Check for explicit hints\n\n\n  if (format === \"number\") {\n    return \"number\";\n  }\n\n  if (format === \"date\") {\n    return \"date\";\n  }\n\n  if (format === \"duration\") {\n    return \"duration\";\n  } // Detect number formatting symbols\n\n\n  if (format.match(/[#0]/)) {\n    return \"number\";\n  } // Detect date formatting symbols\n\n\n  if (format.match(/[ymwdhnsqaxkzgtei]/)) {\n    return \"date\";\n  } // Nothing? Let's display as string\n\n\n  return \"string\";\n}\n/**\r\n * Cleans up format:\r\n * * Strips out formatter hints\r\n *\r\n * @ignore Exclude from docs\r\n * @param format  Format\r\n * @return Cleaned format\r\n */\n\nexport function cleanFormat(format) {\n  return format.replace(/\\/(date|number|duration)$/i, \"\");\n}\n/**\r\n * Strips all tags from the string.\r\n *\r\n * @param text  Source string\r\n * @return String without tags\r\n */\n\nexport function stripTags(text) {\n  return text ? text.replace(/<[^>]*>/g, \"\") : text;\n}\n/**\r\n * Removes new lines and tags from a string.\r\n *\r\n * @param text  String to conver\r\n * @return Converted string\r\n */\n\nexport function plainText(text) {\n  return text ? stripTags((\"\" + text).replace(/[\\n\\r]+/g, \". \")) : text;\n}\n/**\r\n * Escapes string so it can safely be used in a Regex.\r\n *\r\n * @param value  Unsescaped string\r\n * @return Escaped string\r\n */\n\nexport function escapeForRgex(value) {\n  return value.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n}\n/**\r\n * ============================================================================\r\n * DATE-RELATED FUNCTIONS\r\n * ============================================================================\r\n * @hidden\r\n */\n\n/**\r\n * Returns a year day.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Year day\r\n * @todo Account for UTC\r\n */\n\nexport function getYearDay(date, utc) {\n  if (utc === void 0) {\n    utc = false;\n  } // TODO: utc needed?\n\n\n  utc;\n  var start = new Date(date.getFullYear(), 0, 0);\n  var diff = date.getTime() - start.getTime() + (start.getTimezoneOffset() - date.getTimezoneOffset()) * 60 * 1000;\n  var oneDay = 1000 * 60 * 60 * 24;\n  return Math.floor(diff / oneDay);\n}\n/**\r\n * Returns week number for a given date.\r\n *\r\n * @param date  Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number\r\n * @todo Account for UTC\r\n */\n\nexport function getWeek(date, _utc) {\n  if (_utc === void 0) {\n    _utc = false;\n  }\n\n  var d = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));\n  var day = d.getUTCDay() || 7;\n  d.setUTCDate(d.getUTCDate() + 4 - day);\n  var firstDay = new Date(Date.UTC(d.getUTCFullYear(), 0, 1));\n  return Math.ceil(((d.getTime() - firstDay.getTime()) / 86400000 + 1) / 7);\n}\n/**\r\n * Returns a week number in the month.\r\n *\r\n * @param date  Source Date\r\n * @param utc   Assume UTC dates?\r\n * @return Week number in month\r\n */\n\nexport function getMonthWeek(date, utc) {\n  if (utc === void 0) {\n    utc = false;\n  }\n\n  var firstWeek = getWeek(new Date(date.getFullYear(), date.getMonth(), 1), utc);\n  var currentWeek = getWeek(date, utc);\n\n  if (currentWeek == 1) {\n    currentWeek = 53;\n  }\n\n  return currentWeek - firstWeek + 1;\n}\n/**\r\n * Returns a year day out of the given week number.\r\n *\r\n * @param week     Week\r\n * @param year     Year\r\n * @param weekday  Weekday\r\n * @param utc      Assume UTC dates\r\n * @return Day in a year\r\n */\n\nexport function getDayFromWeek(week, year, weekday, utc) {\n  if (weekday === void 0) {\n    weekday = 1;\n  }\n\n  if (utc === void 0) {\n    utc = false;\n  }\n\n  var date = new Date(year, 0, 4, 0, 0, 0, 0);\n\n  if (utc) {\n    date.setUTCFullYear(year);\n  }\n\n  var day = week * 7 + weekday - ((date.getDay() || 7) + 3);\n  return day;\n}\n/**\r\n * Returns 12-hour representation out of the 24-hour hours.\r\n *\r\n * @param hours  24-hour number\r\n * @return 12-hour number\r\n */\n\nexport function get12Hours(hours, base) {\n  if (hours > 12) {\n    hours -= 12;\n  } else if (hours === 0) {\n    hours = 12;\n  }\n\n  return base != null ? hours + (base - 1) : hours;\n}\n/**\r\n * Returns a string name of the time zone.\r\n *\r\n * @param date     Date object\r\n * @param long     Should return long (\"Pacific Standard Time\") or short abbreviation (\"PST\")\r\n * @param savings  Include information if it's in daylight savings mode\r\n * @param utc      Assume UTC dates\r\n * @return Time zone name\r\n */\n\nexport function getTimeZone(date, long, savings, utc) {\n  if (long === void 0) {\n    long = false;\n  }\n\n  if (savings === void 0) {\n    savings = false;\n  }\n\n  if (utc === void 0) {\n    utc = false;\n  }\n\n  if (utc) {\n    return long ? \"Coordinated Universal Time\" : \"UTC\";\n  }\n\n  var wotz = date.toLocaleString(\"UTC\");\n  var wtz = date.toLocaleString(\"UTC\", {\n    timeZoneName: long ? \"long\" : \"short\"\n  }).substr(wotz.length); //wtz = wtz.replace(/[+-]+[0-9]+$/, \"\");\n\n  if (savings === false) {\n    wtz = wtz.replace(/ (standard|daylight|summer|winter) /i, \" \");\n  }\n\n  return wtz;\n}\nexport function getTimezoneOffset(timezone) {\n  var date = new Date(Date.UTC(2012, 0, 1, 0, 0, 0, 0));\n  var utcDate = new Date(date.toLocaleString('en-US', {\n    timeZone: 'UTC'\n  }));\n  var tzDate = new Date(date.toLocaleString('en-US', {\n    timeZone: timezone\n  }));\n  return (tzDate.getTime() - utcDate.getTime()) / 6e4 * -1;\n}\nexport function capitalizeFirst(text) {\n  return text.charAt(0).toUpperCase() + text.slice(1);\n}\n/**\r\n * The functions below are taken and adapted from Garry Tan's blog post:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * The further attributions go mjijackson.com, which now seems to be defunct.\r\n */\n\n/**\r\n * Converts an HSL color value to RGB. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes h, s, and l are contained in the set [0, 1] and\r\n * returns r, g, and b in the set [0, 255].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param h       The hue\r\n * @param s       The saturation\r\n * @param l       The lightness\r\n * @return The RGB representation\r\n */\n\nexport function hslToRgb(color) {\n  var r, g, b;\n  var h = color.h;\n  var s = color.s;\n  var l = color.l;\n\n  if (s == 0) {\n    r = g = b = l; // achromatic\n  } else {\n    var hue2rgb = function hue2rgb(p, q, t) {\n      if (t < 0) {\n        t += 1;\n      }\n\n      if (t > 1) {\n        t -= 1;\n      }\n\n      if (t < 1 / 6) {\n        return p + (q - p) * 6 * t;\n      }\n\n      if (t < 1 / 2) {\n        return q;\n      }\n\n      if (t < 2 / 3) {\n        return p + (q - p) * (2 / 3 - t) * 6;\n      }\n\n      return p;\n    };\n\n    var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n    var p = 2 * l - q;\n    r = hue2rgb(p, q, h + 1 / 3);\n    g = hue2rgb(p, q, h);\n    b = hue2rgb(p, q, h - 1 / 3);\n  }\n\n  return {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  };\n}\n/**\r\n * Converts an RGB color value to HSL. Conversion formula\r\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\r\n * Assumes r, g, and b are contained in the set [0, 255] and\r\n * returns h, s, and l in the set [0, 1].\r\n *\r\n * Function adapted from:\r\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\r\n *\r\n * @ignore Exclude from docs\r\n * @param r       The red color value\r\n * @param g       The green color value\r\n * @param b       The blue color value\r\n * @return The HSL representation\r\n */\n\nexport function rgbToHsl(color) {\n  var r = color.r / 255;\n  var g = color.g / 255;\n  var b = color.b / 255;\n  var max = Math.max(r, g, b);\n  var min = Math.min(r, g, b);\n  var h = 0;\n  var s = 0;\n  var l = (max + min) / 2;\n\n  if (max === min) {\n    h = s = 0; // achromatic\n  } else {\n    var d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n\n      case g:\n        h = (b - r) / d + 2;\n        break;\n\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  return {\n    h: h,\n    s: s,\n    l: l\n  };\n}\n/**\r\n * Returns a color that is `percent` brighter than the reference color.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color    Reference color\r\n * @param percent  Brightness percent\r\n * @return Hex code of the new color\r\n */\n\nexport function lighten(rgb, percent) {\n  if (rgb) {\n    return {\n      r: Math.max(0, Math.min(255, rgb.r + getLightnessStep(rgb.r, percent))),\n      g: Math.max(0, Math.min(255, rgb.g + getLightnessStep(rgb.g, percent))),\n      b: Math.max(0, Math.min(255, rgb.b + getLightnessStep(rgb.b, percent))),\n      a: rgb.a\n    };\n  } else {\n    // TODO is this correct ?\n    return rgb;\n  }\n}\n;\n/**\r\n * Gets lightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\n\nexport function getLightnessStep(value, percent) {\n  var base = percent > 0 ? 255 - value : value;\n  return Math.round(base * percent);\n}\n/**\r\n * Returns a color that is `percent` brighter than the source `color`.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color    Source color\r\n * @param percent  Brightness percent\r\n * @return New color\r\n */\n\nexport function brighten(rgb, percent) {\n  if (rgb) {\n    var base = Math.min(Math.max(rgb.r, rgb.g, rgb.b), 230); //let base = Math.max(rgb.r, rgb.g, rgb.b);\n\n    var step = getLightnessStep(base, percent);\n    return {\n      r: Math.max(0, Math.min(255, Math.round(rgb.r + step))),\n      g: Math.max(0, Math.min(255, Math.round(rgb.g + step))),\n      b: Math.max(0, Math.min(255, Math.round(rgb.b + step))),\n      a: rgb.a\n    };\n  } else {\n    // TODO is this correct ?\n    return rgb;\n  }\n}\n;\n/**\r\n * Returns brightness step.\r\n *\r\n * @ignore Exclude from docs\r\n * @param value    Value\r\n * @param percent  Percent\r\n * @return Step\r\n */\n\nexport function getBrightnessStep(_value, percent) {\n  var base = 255; //percent > 0 ? 255 - value : value;\n\n  return Math.round(base * percent);\n}\n/**\r\n * Returns `true` if color is \"light\". Useful indetermining which contrasting\r\n * color to use for elements over this color. E.g.: you would want to use\r\n * black text over light background, and vice versa.\r\n *\r\n * @ignore Exclude from docs\r\n * @param color  Source color\r\n * @return Light?\r\n */\n\nexport function isLight(color) {\n  return (color.r * 299 + color.g * 587 + color.b * 114) / 1000 >= 128;\n}\n/**\r\n * Returns a new [[iRGB]] object based on `rgb` parameter with specific\r\n * saturation applied.\r\n *\r\n * `saturation` can be in the range of 0 (fully desaturated) to 1 (fully\r\n * saturated).\r\n *\r\n * @ignore Exclude from docs\r\n * @param color       Base color\r\n * @param saturation  Saturation (0-1)\r\n * @return New color\r\n */\n\nexport function saturate(rgb, saturation) {\n  if (rgb === undefined || saturation == 1) {\n    return rgb;\n  }\n\n  var hsl = rgbToHsl(rgb);\n  hsl.s = saturation;\n  return hslToRgb(hsl);\n}\nexport function alternativeColor(color, lightAlternative, darkAlternative) {\n  if (lightAlternative === void 0) {\n    lightAlternative = {\n      r: 255,\n      g: 255,\n      b: 255\n    };\n  }\n\n  if (darkAlternative === void 0) {\n    darkAlternative = {\n      r: 255,\n      g: 255,\n      b: 255\n    };\n  }\n\n  var light = lightAlternative;\n  var dark = darkAlternative;\n\n  if (isLight(darkAlternative)) {\n    light = darkAlternative;\n    dark = lightAlternative;\n  }\n\n  return isLight(color) ? dark : light;\n}\n/**\r\n * @ignore\r\n * @deprecated\r\n */\n// export function unshiftThemeClass(settings: any, themeClass: string) {\n// \tlet themeClasses = settings.themeClasses;\n// \tif (!themeClasses) {\n// \t\tthemeClasses = [];\n// \t}\n// \tthemeClasses.unshift(themeClass);\n// \tsettings.themeClasses = themeClasses;\n// }\n\n/**\r\n * @ignore\r\n * @deprecated\r\n */\n// export function pushThemeClass(settings: any, themeClass: string) {\n// \tlet themeClasses = settings.themeClasses;\n// \tif (!themeClasses) {\n// \t\tthemeClasses = [];\n// \t}\n// \tthemeClasses.push(themeClass);\n// \tsettings.themeClasses = themeClasses;\n// }\n\n/**\r\n * @ignore\r\n */\n\nexport function mergeTags(tags1, tags2) {\n  if (!tags1) {\n    tags1 = [];\n  }\n\n  return __spreadArray(__spreadArray([], __read(tags1), false), __read(tags2), false).filter(function (value, index, self) {\n    return self.indexOf(value) === index;\n  });\n}\n/**\r\n * @ignore\r\n */\n\nexport function sameBounds(a, b) {\n  if (!b) {\n    return false;\n  }\n\n  if (a.left != b.left) {\n    return false;\n  }\n\n  if (a.right != b.right) {\n    return false;\n  }\n\n  if (a.top != b.top) {\n    return false;\n  }\n\n  if (a.bottom != b.bottom) {\n    return false;\n  }\n\n  return true;\n} //# sourceMappingURL=Utils.js.map","map":null,"metadata":{},"sourceType":"module"}