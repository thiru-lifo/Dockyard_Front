{"ast":null,"code":"import { __extends, __read } from \"tslib\";\nimport { AxisRenderer } from \"./AxisRenderer\";\nimport { p100 } from \"../../../core/util/Percent\";\nimport * as $type from \"../../../core/util/Type\";\nimport * as $utils from \"../../../core/util/Utils\";\nimport { Rectangle } from \"../../../core/render/Rectangle\";\n/**\r\n * Used to render vertical axis.\r\n *\r\n * @see {@link https://www.amcharts.com/docs/v5/charts/xy-chart/#Axis_renderer} for more info\r\n * @important\r\n */\n\nvar AxisRendererY =\n/** @class */\nfunction (_super) {\n  __extends(AxisRendererY, _super);\n\n  function AxisRendererY() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    Object.defineProperty(_this, \"_downY\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"thumb\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: Rectangle.new(_this._root, {\n        height: p100,\n        isMeasured: false,\n        themeTags: [\"axis\", \"y\", \"thumb\"]\n      })\n    });\n    return _this;\n  }\n\n  Object.defineProperty(AxisRendererY.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._settings.themeTags = $utils.mergeTags(this._settings.themeTags, [\"renderer\", \"y\"]);\n\n      if (this._settings.opposite) {\n        this._settings.themeTags.push(\"opposite\");\n      }\n\n      _super.prototype._afterNew.call(this);\n\n      this.setPrivateRaw(\"letter\", \"Y\");\n      var gridTemplate = this.grid.template;\n      gridTemplate.set(\"width\", p100);\n      gridTemplate.set(\"height\", 0);\n      gridTemplate.set(\"draw\", function (display, graphics) {\n        display.moveTo(0, 0);\n        display.lineTo(graphics.width(), 0);\n      });\n      this.set(\"draw\", function (display, renderer) {\n        display.moveTo(0, 0);\n        display.lineTo(0, renderer.height());\n      });\n    }\n  });\n  Object.defineProperty(AxisRendererY.prototype, \"_getPan\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (point1, point2) {\n      return (point1.y - point2.y) / this.height();\n    }\n  });\n  Object.defineProperty(AxisRendererY.prototype, \"_changed\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._changed.call(this);\n\n      var axis = this.axis;\n      axis.ghostLabel.setPrivate(\"visible\", !this.get(\"inside\"));\n      var thumb = this.thumb;\n      var opposite = \"opposite\";\n      var inside = \"inside\";\n      var chart = this.chart;\n\n      if (this.isDirty(opposite) || this.isDirty(inside)) {\n        var axisChildren = axis.children;\n\n        if (this.get(inside)) {\n          axis.addTag(inside);\n        } else {\n          axis.removeTag(inside);\n        }\n\n        if (chart) {\n          if (this.get(opposite)) {\n            var children = chart.rightAxesContainer.children;\n\n            if (children.indexOf(axis) == -1) {\n              children.moveValue(axis, 0);\n            }\n\n            axis.addTag(opposite);\n            axisChildren.moveValue(this, 0);\n          } else {\n            var children = chart.leftAxesContainer.children;\n\n            if (children.indexOf(axis) == -1) {\n              children.moveValue(axis);\n            }\n\n            axis.removeTag(opposite);\n            axisChildren.moveValue(this);\n          }\n\n          axis.ghostLabel._applyThemes();\n\n          this.labels.each(function (label) {\n            label._applyThemes();\n          });\n\n          this.root._markDirtyRedraw();\n        }\n\n        axis.markDirtySize();\n      }\n\n      var w = axis.labelsContainer.width();\n\n      if (chart) {\n        if (this.get(opposite)) {\n          thumb.set(\"centerX\", 0);\n        } else {\n          thumb.set(\"centerX\", w);\n        }\n      }\n\n      thumb.setPrivate(\"width\", w);\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"processAxis\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype.processAxis.call(this);\n\n      var axis = this.axis;\n\n      if (axis.get(\"height\") == null) {\n        axis.set(\"height\", p100);\n      }\n\n      var horizontalLayout = this._root.horizontalLayout;\n      axis.set(\"layout\", horizontalLayout);\n      axis.labelsContainer.set(\"height\", p100);\n      axis.axisHeader.set(\"layout\", horizontalLayout);\n    }\n  });\n  Object.defineProperty(AxisRendererY.prototype, \"_updatePositions\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var axis = this.axis;\n      axis.gridContainer.set(\"y\", axis.y() - $utils.relativeToValue(axis.get(\"centerY\", 0), axis.height()));\n      axis.bulletsContainer.set(\"x\", this.x());\n      var chart = axis.chart;\n\n      if (chart) {\n        var plotContainer = chart.plotContainer;\n        var axisHeader = axis.axisHeader;\n        var height = axis.get(\"marginTop\", 0);\n\n        if (axisHeader.children.length > 0) {\n          height = axis.axisHeader.height();\n          axis.set(\"marginTop\", height);\n        } else {\n          axisHeader.set(\"height\", height);\n        }\n\n        axisHeader.setAll({\n          y: axis.y() - height,\n          x: -1,\n          width: plotContainer.width() + 2\n        });\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"axisLength\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.axis.innerHeight();\n    }\n  });\n  /**\r\n   * Converts axis relative position to actual coordinate in pixels.\r\n   *\r\n   * @param   position  Position\r\n   * @return            Point\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"positionToPoint\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (position) {\n      return {\n        x: 0,\n        y: this.positionToCoordinate(position)\n      };\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateLabel\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (label, position, endPosition, count) {\n      if (label) {\n        if (!$type.isNumber(position)) {\n          position = 0;\n        }\n\n        var location_1 = 0.5;\n\n        if ($type.isNumber(count) && count > 1) {\n          location_1 = label.get(\"multiLocation\", location_1);\n        } else {\n          location_1 = label.get(\"location\", location_1);\n        }\n\n        var opposite = this.get(\"opposite\");\n        var inside = label.get(\"inside\", this.get(\"inside\", false));\n\n        if (opposite) {\n          label.set(\"x\", 0);\n\n          if (inside) {\n            label.set(\"position\", \"absolute\");\n          } else {\n            label.set(\"position\", \"relative\");\n          }\n        } else {\n          if (inside) {\n            label.set(\"x\", 0);\n            label.set(\"position\", \"absolute\");\n          } else {\n            label.set(\"x\", undefined);\n            label.set(\"position\", \"relative\");\n          }\n        }\n\n        if ($type.isNumber(endPosition) && endPosition != position) {\n          position = position + (endPosition - position) * location_1;\n        }\n\n        label.set(\"y\", this.positionToCoordinate(position));\n        this.toggleVisibility(label, position, label.get(\"minPosition\", 0), label.get(\"maxPosition\", 1));\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateGrid\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (grid, position, endPosition) {\n      if (grid) {\n        if (!$type.isNumber(position)) {\n          position = 0;\n        }\n\n        var location_2 = grid.get(\"location\", 0.5);\n\n        if ($type.isNumber(endPosition) && endPosition != position) {\n          position = position + (endPosition - position) * location_2;\n        }\n\n        grid.set(\"y\", Math.round(this.positionToCoordinate(position)) - this.axis._crispY + 0.5);\n        this.toggleVisibility(grid, position, 0, 1);\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateTick\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (tick, position, endPosition, count) {\n      if (tick) {\n        if (!$type.isNumber(position)) {\n          position = 0;\n        }\n\n        var location_3 = 0.5;\n\n        if ($type.isNumber(count) && count > 1) {\n          location_3 = tick.get(\"multiLocation\", location_3);\n        } else {\n          location_3 = tick.get(\"location\", location_3);\n        }\n\n        if ($type.isNumber(endPosition) && endPosition != position) {\n          position = position + (endPosition - position) * location_3;\n        }\n\n        tick.set(\"y\", Math.round(this.positionToCoordinate(position)) - this.axis._crispY + 0.5);\n        var length_1 = tick.get(\"length\", 0);\n        var inside = tick.get(\"inside\", this.get(\"inside\", false));\n\n        if (this.get(\"opposite\")) {\n          tick.set(\"x\", 0);\n\n          if (inside) {\n            length_1 *= -1;\n          }\n        } else {\n          if (!inside) {\n            length_1 *= -1;\n          }\n        }\n\n        tick.set(\"draw\", function (display) {\n          display.moveTo(0, 0);\n          display.lineTo(length_1, 0);\n        });\n        this.toggleVisibility(tick, position, tick.get(\"minPosition\", 0), tick.get(\"maxPosition\", 1));\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateBullet\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (bullet, position, endPosition) {\n      if (bullet) {\n        var sprite = bullet.get(\"sprite\");\n\n        if (sprite) {\n          if (!$type.isNumber(position)) {\n            position = 0;\n          }\n\n          var location_4 = bullet.get(\"location\", 0.5);\n\n          if ($type.isNumber(endPosition) && endPosition != position) {\n            position = position + (endPosition - position) * location_4;\n          }\n\n          var bulletPosition = this.axis.roundAxisPosition(position, location_4);\n          var previousBullet = this.axis._bullets[bulletPosition];\n          var d = 1;\n\n          if (this.get(\"opposite\")) {\n            d = -1;\n          }\n\n          if (bullet.get(\"stacked\")) {\n            if (previousBullet) {\n              var previousSprite = previousBullet.get(\"sprite\");\n\n              if (previousSprite) {\n                sprite.set(\"x\", previousSprite.x() + previousSprite.width() * d);\n              }\n            } else {\n              sprite.set(\"x\", 0);\n            }\n          }\n\n          this.axis._bullets[bulletPosition] = bullet;\n          sprite.set(\"y\", this.positionToCoordinate(position));\n          this.toggleVisibility(sprite, position, 0, 1);\n        }\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateFill\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (fill, position, endPosition) {\n      if (fill) {\n        if (!$type.isNumber(position)) {\n          position = 0;\n        }\n\n        if (!$type.isNumber(endPosition)) {\n          endPosition = 1;\n        }\n\n        var y0 = this.positionToCoordinate(position);\n        var y1 = this.positionToCoordinate(endPosition);\n        this.fillDrawMethod(fill, y0, y1);\n      }\n    }\n  });\n  Object.defineProperty(AxisRendererY.prototype, \"fillDrawMethod\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (fill, y0, y1) {\n      var _this = this;\n\n      fill.set(\"draw\", function (display) {\n        var _a; // using for holes, so can not be rectangle\n\n\n        var w = _this.axis.gridContainer.width();\n\n        var h = _this.height();\n\n        if (y1 < y0) {\n          _a = __read([y0, y1], 2), y1 = _a[0], y0 = _a[1];\n        }\n\n        if (y0 > h || y1 < 0) {\n          return;\n        } //y0 = Math.max(0, y0);\n        //y1 = Math.min(h, y1);\n\n\n        display.moveTo(0, y0);\n        display.lineTo(w, y0);\n        display.lineTo(w, y1);\n        display.lineTo(0, y1);\n        display.lineTo(0, y0);\n      });\n    }\n  });\n  /**\r\n   * Converts relative position (0-1) on axis to a pixel coordinate.\r\n   *\r\n   * @param position  Position (0-1)\r\n   * @return Coordinate (px)\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"positionToCoordinate\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (position) {\n      if (!this._inversed) {\n        return (this._end - position) * this._axisLength;\n      } else {\n        return (position - this._start) * this._axisLength;\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"positionTooltip\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (tooltip, position) {\n      this._positionTooltip(tooltip, {\n        x: 0,\n        y: this.positionToCoordinate(position)\n      });\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"updateTooltipBounds\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (tooltip) {\n      var inside = this.get(\"inside\");\n      var num = 100000;\n\n      var global = this._display.toGlobal({\n        x: 0,\n        y: 0\n      });\n\n      var y = global.y;\n      var x = 0;\n      var h = this.axisLength();\n      var w = num;\n      var pointerOrientation = \"right\";\n\n      if (this.get(\"opposite\")) {\n        if (inside) {\n          pointerOrientation = \"right\";\n          x = global.x - num;\n          w = num;\n        } else {\n          pointerOrientation = \"left\";\n          x = global.x;\n          w = num;\n        }\n      } else {\n        if (inside) {\n          pointerOrientation = \"left\";\n          x = global.x;\n          w = num;\n        } else {\n          pointerOrientation = \"right\";\n          x = global.x - num;\n          w = num;\n        }\n      }\n\n      var bounds = {\n        left: x,\n        right: x + w,\n        top: y,\n        bottom: y + h\n      };\n      var oldBounds = tooltip.get(\"bounds\");\n\n      if (!$utils.sameBounds(bounds, oldBounds)) {\n        tooltip.set(\"bounds\", bounds);\n        tooltip.set(\"pointerOrientation\", pointerOrientation);\n      }\n    }\n  });\n  Object.defineProperty(AxisRendererY.prototype, \"_updateLC\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var axis = this.axis;\n      var parent = axis.parent;\n\n      if (parent) {\n        var h = parent.innerHeight();\n        this._lc = this.axisLength() / h;\n        this._ls = axis.y() / h;\n      }\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"toAxisPosition\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (position) {\n      var start = this._start || 0;\n      var end = this._end || 1;\n      position -= this._ls;\n      position = position * (end - start) / this._lc;\n\n      if (this.get(\"inversed\")) {\n        position = start + position;\n      } else {\n        position = end - position;\n      }\n\n      return position;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n\n  Object.defineProperty(AxisRendererY.prototype, \"fixPosition\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (position) {\n      if (!this.get(\"inversed\")) {\n        return 1 - position;\n      }\n\n      return position;\n    }\n  });\n  Object.defineProperty(AxisRendererY, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"AxisRendererY\"\n  });\n  Object.defineProperty(AxisRendererY, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: AxisRenderer.classNames.concat([AxisRendererY.className])\n  });\n  return AxisRendererY;\n}(AxisRenderer);\n\nexport { AxisRendererY }; //# sourceMappingURL=AxisRendererY.js.map","map":null,"metadata":{},"sourceType":"module"}